"use strict";(globalThis.webpackChunkpay_with_metamask=globalThis.webpackChunkpay_with_metamask||[]).push([[554],{4554:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(1609),c=n(8086),l=n(578),r=n(3157),o=n(5056),s=n(3857),i=n(5072),m=n(7665),p=n(1009),u=n(6636),w=n(120);const{ccpw_wc_id:d,enabledWallets:_,const_msg:h}=connect_wallts,E=({currentchain:e,config:t,switchModal:n,switchHandler:r})=>{const{open:o,setOpen:i,openSwitchNetworks:m}=(0,s.hS)(),{isConnected:u,address:w,chain:d}=(0,c.F)(),{disconnect:_}=(0,l.u)();!d&&u&&n&&(o&&setTimeout((()=>{r()}),100),m()),o&&(0,p.Iw)(h),(0,a.useEffect)((()=>{d?.id===e.networks.id&&i(!1)}),[d?.id]);return(0,a.createElement)(a.Fragment,null,d&&u&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"cpmw_p_connect"},(0,a.createElement)("div",{className:"cpmw_p_status"},h.connected),(0,a.createElement)("div",{className:"cpmw_disconnect_wallet",onClick:()=>{_()}},h.disconnect)),(0,a.createElement)("div",{className:"cpmw_p_info"},(0,a.createElement)("div",{className:"cpmw_address_wrap"},(0,a.createElement)("strong",null,h.wallet,":"),(0,a.createElement)("span",{className:"cpmw_p_address"},w)),(0,a.createElement)("div",{className:"cpmw_p_network"},(0,a.createElement)("strong",null,h.network,":")," ",e.networkResponse.decimal_networks[d?.id]?e.networkResponse.decimal_networks[d?.id]:d.name))),(0,a.createElement)(p.LD,{data:e,const_msg:h,config:t}),(0,p.Xb)()&&!u&&(0,a.createElement)(p.ik,{title:h.connect_wallet}),!(0,p.Xb)()&&!u&&(0,a.createElement)(p.yG,{const_msg:h}))},y=new i.E,k=e=>{try{const[t,n]=(0,a.useState)(null),[c,l]=(0,a.useState)(!0),i=()=>{l(!1)};return(0,a.useEffect)((()=>{const t={walletConnectProjectId:d,appName:"Pay With Metamask",appDescription:window.location.host,chains:e.networks,appUrl:window.location.host,appIcon:"https://family.co/logo.png"};n((e=>{const t=(0,s.Y8)({walletConnectProjectId:e.walletConnectProjectId,appName:e.appName,chains:[e.chains],appDescription:e.appDescription,appUrl:e.appUrl,appIcon:e.appIcon});if(t){const n=[];return Object.entries(_).forEach((t=>{"metamask_wallet"!==t[0]||"1"!==t[1]||(0,p.Xb)()?("wallet_connect"===t[0]&&"1"===t[1]||(0,p.Xb)())&&e.walletConnectProjectId&&n.push((0,w.u)({projectId:e.walletConnectProjectId,showQrModal:(0,p.Xb)()})):n.push((0,u.e)())})),t.connectors=n,(0,r.Z)(t)}})(t))}),[e.networks]),[t&&e.networks&&(0,a.createElement)("div",{key:"conn-app-wrapper"},(0,a.createElement)(o.x,{config:t},(0,a.createElement)(m.Ht,{client:y},(0,a.createElement)(s.yr,{options:{hideBalance:!0,walletConnectName:h.wallet_connect}},(0,a.createElement)(E,{currentchain:e,config:t,switchModal:c,switchHandler:i})))))]}catch(e){console.log(e)}};var g=n(3365),b=n(8918);function f(){const{enabledCurrency:e,const_msg:t,currency_lbl:n,network_lbl:c,total_price:l}=connect_wallts,[r,o]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[w,d]=(0,a.useState)(null),[_,h]=(0,a.useState)(null),[E,y]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!1),[N,S]=(0,a.useState)(!1),[C,I]=(0,a.useState)(!1),[j,P]=(0,a.useState)(l),F=l;(0,a.useEffect)((()=>{if(F){h(null),d(null);const e=parseFloat(F);isNaN(e)?console.error("Parsed numeric part is not a valid number:",F):(P(e),X(e))}}),[F]);const H=document.querySelector('input[name="payment_method"]:checked')?.value,O=document.querySelector("button#place_order");(0,a.useEffect)((()=>{O.disabled="cpmw"===H}),[H]),(0,a.useEffect)((()=>{D(e)}),[]);const X=async e=>{try{const t=await(0,b.l3)(e,connect_wallts);t?(D(t),connect_wallts.enabledCurrency=t):console.error("No response or undefined response from restUpdatePrice")}catch(e){console.error("Error fetching data:",e)}},D=async e=>{try{let t=[];e&&0!==Object.keys(e).length&&(Object.values(e).forEach((e=>{if(!e.price)return;const n={value:e.symbol,label:(0,a.createElement)("p",{className:""},(0,a.createElement)("img",{src:e.url,alt:e.symbol})," ",e.price," ",e.symbol),rating:e.price};t.push(n)})),h(t))}catch(e){console.error("Error fetching data:",e)}};return(0,a.createElement)("div",{key:"show_currency_wrapper"},_?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"cpmwp_currency_lbl"},n),(0,a.createElement)(g.Ay,{name:"cpmwp_crypto_coin",value:w,onChange:e=>{y(!0),I(e),d(e),(async e=>{try{const t=await(0,b.Gg)(e,connect_wallts,j),n=[];S(t),Object.entries(t?.active_network).forEach((e=>{const t={value:e[0],label:e[1]};n.push(t)})),i(n),y(!1)}catch(e){console.error("Error fetching data:",e)}})(e.value),o(e.value),u(null),O.disabled=!0},options:_,placeholder:t.select_cryptocurrency}),s?(0,a.createElement)(a.Fragment,null,E?(0,a.createElement)(p.aH,{loader:1,width:250}):(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"cpmwp_network_lbl"},c),(0,a.createElement)(g.Ay,{name:"cpmw_payment_network",onChange:async t=>{u(null),v(!0);const n=parseInt(t?.value,16);if(N.final_price[t.value]){const c=N.final_price[t.value],l=(0,a.createElement)("p",{className:""},(0,a.createElement)("img",{src:e[r].url,alt:t.value})," ",N.token_discount[n]&&(0,a.createElement)("del",null,e[r].price," ",e[r].symbol)," ",c," ",e[r].symbol);d({value:r,label:l,rating:c})}else d(C);const c=await(0,p.ur)(n,N.network_settings[t?.value]);v(!1),u(c)},options:s,placeholder:t.choose_network_chain}))):E&&(0,a.createElement)(p.aH,{loader:1,width:250}),m&&(0,a.createElement)(k,{networks:m,currentprice:w,networkChange:f,networkResponse:N})):(0,a.createElement)(p.aH,{loader:1,width:250}))}}}]);